<ion-header translucent>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-row class="ion-justify-content-between">
        <ion-col>
            <ion-title>Discover Books</ion-title>
        </ion-col>
        <ion-col class="ion-text-end ion-margin-end">
            <ion-icon class="ion-search" name="search-outline"></ion-icon>
        </ion-col>
        </ion-row>
    </ion-toolbar>
    </ion-header>

<ion-content class="ion-padding" fullscreen>
    <ion-segment value="all">
        <ion-segment-button value="all">All Books</ion-segment-button>
        <ion-segment-button value="bookable">Your Books</ion-segment-button>
    </ion-segment>
    <ion-grid *ngIf="bookDetails && bookDetails.length < 0">
        <ion-row>
        <ion-col size="12" size-sm="8" offset-sm="2" class="ion-text-center">
            <p>There are no books right now, please come back later!</p>
        </ion-col>
        </ion-row>
    </ion-grid>
    <ion-grid>
        <ion-row>
            <ion-col 
                *ngIf="bookDetails"
                size="12" 
                size-sm="8" 
                offset-sm="2" 
                class="ion-text-center">
                <ion-card>
                <ion-card-header>
                    <ion-card-title>The most read book</ion-card-title>
                </ion-card-header>
                <ion-img [src]="bookDetails[0].bookList[0].imageUrl"></ion-img>
                <ion-card-content>
                    <p>{{ bookDetails[0].bookList[0].title }}</p>
                </ion-card-content>
                <div>
                    <ion-button
                    (click)="onSelectedBook(bookDetails[0].bookList[0])"
                    fill="clear"
                    color="primary"
                    [routerLink]="[
                        '/',
                        'books',
                        'tabs',
                        'discover',
                        bookDetails[0].bookList[0].id
                    ]"
                    >
                    More
                    </ion-button>
                </div>
                </ion-card>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="12" size-sm="8" offset-sm="2" class="ion-text-center">
                <ion-virtual-scroll
                    [items]="bookDetails"
                    approxItemHeight="70px"
                >
                <ion-list
                    class="ion-no-margin"
                    *virtualItem="let bookGroup">
                    <ion-list-header>
                        <h1>{{ bookGroup.title }}</h1>
                    </ion-list-header>

                    <ion-item 
                        (click)="onSelectedBook(bookList)"
                        *ngFor="let bookList of bookGroup.bookList"
                        detail
                        [routerLink]="['/', 'books', 'tabs', 'discover', bookList.id]">
                        <ion-thumbnail slot="start">
                            <img [src]="bookList.imageUrl">
                        </ion-thumbnail>
                        <ion-label>
                            <h2>{{ bookList.title }}</h2>
                            <h3>{{ bookList.author }}</h3>
                            <p>{{ bookList.description }}</p>
                        </ion-label>
                    </ion-item>
                </ion-list>
                </ion-virtual-scroll>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>